# オートバトルRPG 現在の開発状況

## 概要

オートバトルRPGの開発は、開発計画書に記載されていた第3フェーズまで完了しています。
本ドキュメントでは現在の実装状況を整理し、今後取り組む予定の課題について説明します。

## 完了済みの開発フェーズ

### 第1フェーズ: メニュー画面の実装

- [PR #2](https://github.com/ishihara1989/js-game-sample/pull/2)で実装
- MainSceneを拡張したMenuSceneの実装
- 以下のサブメニューを実装:
  - ステージ選択（バトル開始）
  - アイテム管理（UI部分のみ）
  - 装備変更（UI部分のみ）
  - ステータス詳細
- [PR #3](https://github.com/ishihara1989/js-game-sample/pull/3)でサブメニュー状態管理の修正

### 第2フェーズ: ステージシステムの実装

- [PR #5](https://github.com/ishihara1989/js-game-sample/pull/5)で実装
- ステージ関連の型定義
- 基本的なステージシステム（Stage基底クラス）
- 具体的なステージの実装（Stage_1_1, Stage_1_2, Stage_1_3）
- ステージファクトリーの実装
- バトルシーンの連携改修
- [PR #6](https://github.com/ishihara1989/js-game-sample/pull/6)でUI要素の描画深度を修正

### 第3フェーズ: 敵ユニット管理の改善

- [PR #7](https://github.com/ishihara1989/js-game-sample/pull/7)で実装
- EnemyUnitクラスの実装
  - レベルに応じたステータス計算
  - 経験値システム
  - ドロップアイテムシステム
  - 基本的なAI行動パターン
- 具体的なエネミータイプの実装
  - GoblinEnemy: 基本的な近接攻撃型
  - OrcEnemy: HPが低下するとエンレイジする強力な近接型
  - SlimeEnemy: 高速移動とダッシュ攻撃が特徴の敵
- ファクトリパターンの適用
  - EnemyFactoryによるエネミー生成
- [PR #9](https://github.com/ishihara1989/js-game-sample/pull/9)でエネミーシステムのTypeScriptエラーを修正

## 今後の開発課題

次に取り組む予定の課題は以下の通りです：

1. **スキルシステムの改修**
   - ユニットの振る舞いからスキルを分離
   - skills/ディレクトリ下に個別のスキルクラスを実装
   - 予定している基本スキル：
     - 近距離の単体攻撃
     - 遠距離の単体攻撃
     - 近距離の範囲攻撃

2. **レベルとレベルアップの実装**
   - レベルに応じたステータス決定システム
   - 特定レベルでのスキルアンロック機能

3. **装備アイテムとUIの実装**
   - ステータス上昇効果のある基本装備
   - 将来的には固有オプション付き装備も視野に

4. **プレイヤー側の新ユニット実装**
   - 特定ステージクリア後にアンロック
   - 初期ユニットと異なるステータス・スキル設定

5. **（将来課題）セーブシステムの実装**
   - プレイヤーの進行状況保存機能

## コード構成

現在のコード構成は以下の通りです：

```
src/
├── assets/           # ゲームアセット
├── scenes/           
│   ├── MenuScene.ts   # メインメニュー画面
│   ├── BattleScene.ts # 戦闘シーン（ステージシステムと連携）
│   └── ResultScene.ts # リザルト画面
├── objects/          
│   ├── Unit.ts        # ユニット基本クラス
│   ├── EnemyUnit.ts   # 敵ユニット基本クラス
│   └── enemies/       # 具体的な敵タイプの実装
├── stages/           
│   ├── Stage.ts       # ステージ基本クラス
│   ├── Stage_1_1.ts   # ステージ1-1
│   ├── Stage_1_2.ts   # ステージ1-2
│   ├── Stage_1_3.ts   # ステージ1-3
│   └── StageFactory.ts # ステージ生成ファクトリ
├── types/            
│   ├── BattleTypes.ts # 戦闘関連型定義
│   ├── PlayerTypes.ts # プレイヤー関連型定義
│   └── StageTypes.ts  # ステージ関連型定義
└── index.ts          # エントリーポイント
```

これから実装予定のスキル関連のコードは以下のような構成になる予定です：

```
src/
├── ...
├── skills/
│   ├── Skill.ts       # スキル基本クラス
│   ├── MeleeSkill.ts  # 近接攻撃スキル
│   ├── RangeSkill.ts  # 遠距離攻撃スキル
│   └── AreaSkill.ts   # 範囲攻撃スキル
├── ...
```
